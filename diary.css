/* å¼•å…¥ä¸»é¡µçš„è“ç»¿å’Œåƒç´ ä¸»é¢˜å˜é‡/æ ·å¼ */
/* æ³¨æ„ï¼šè¿™é‡Œå‡è®¾ styles.css ä¸­å®šä¹‰äº† .pixel-box, .pixel-btn ç­‰æ ·å¼ï¼Œ
        ä½†ä¸ºäº†è®© diary.css ç‹¬ç«‹å·¥ä½œï¼Œæˆ‘ä»¬å°†ä¸€äº›å…³é”®åƒç´ åŒ–å®šä¹‰æ”¾åœ¨è¿™é‡Œ */

/* --- å…¨å±€ä¸»é¢˜ç»Ÿä¸€ --- */
/* æ³¨æ„ï¼šå¦‚æœä¸»é¡µçš„ styles.css å·²ç»åŠ è½½ï¼Œä¸‹é¢çš„é‡å¤å®šä¹‰å¯ä»¥åˆ é™¤ï¼Œ
        ä½†ä¸ºç¡®ä¿æœ¬é¡µç‹¬ç«‹æ¸²æŸ“æ­£ç¡®ï¼Œæš‚æ—¶ä¿ç•™æ ¸å¿ƒæ ·å¼ã€‚ */
        :root {
            --color-dark-green: #194C4F;
            --color-medium-green: #3E8E8E;
            --color-light-green: #B4DFD9;
            --color-warm-orange: #E68A47;
            --color-pixel-shadow: #5EAFB0;
            --color-background-light: #E8F7F3;
        }
        
        body {
            /* ç»§æ‰¿ä¸»é¡µçš„å­—ä½“å’ŒèƒŒæ™¯ */
            font-family: 'DotGothic16', monospace; 
            color: var(--color-dark-green);
            background-color: var(--color-background-light); 
        }
        
        /* --- æ ¸å¿ƒå®¹å™¨æ ·å¼ --- */
        .diary-main {
            display: flex;
            justify-content: center;
            padding: 30px 20px; /* è°ƒæ•´ paddingï¼Œç»™ header ç•™å‡ºç©ºé—´ */
            gap: 40px; 
        }
        
        /* å¡ç‰‡å †å çš„å®¹å™¨ */
        #card-stack-container {
            width: 600px; 
            height: 450px; 
            position: relative;
            margin: 50px 0 50px 0; 
        }
        
        /* å•ä¸ªå›å¿†å¡ç‰‡çš„æ ·å¼ - åƒç´ åŒ–å’Œç”°å›­æ²»æ„ˆæ„Ÿ */
        .diary-card {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            
            /* åƒç´ åŒ–è¾¹æ¡†å’Œé˜´å½± */
            border: 4px solid var(--color-medium-green); 
            box-shadow: 6px 6px 0 var(--color-pixel-shadow); 
            background-color: #FAFFFC; /* æ²»æ„ˆæµ…ç™½ç»¿ */
            border-radius: 0; /* ä¿æŒæ–¹å½¢åƒç´ æ„Ÿ */
            transition: transform 0.6s ease-in-out, opacity 0.6s; 
            cursor: default;
            
            transform: rotateX(0deg) scale(0.98); 
            z-index: 1; /* ç¡®ä¿æ‰€æœ‰å¡ç‰‡éƒ½åœ¨å°é¢ä¹‹ä¸Š */
        }
        
        /* å°é¢å¡ç‰‡æ ·å¼ */
        .diary-card.card-cover {
            background-color: #92C9B4; /* æ²»æ„ˆç»¿å°é¢ */
            color: var(--color-dark-green);
            z-index: 200; 
            text-align: center;
            padding-top: 100px; 
            box-sizing: border-box;
        }
        .diary-card.card-cover h2 {
            font-size: 2.5em;
            color: var(--color-warm-orange); /* æš–è‰²è°ƒå¼ºè°ƒ */
            text-shadow: 2px 2px 0 var(--color-dark-green);
            margin-bottom: 20px;
        }
        .diary-card.card-cover p {
            font-size: 1.2em;
        }
        
        
        /* æœ€åçš„æç¤ºå¡ç‰‡æ ·å¼ */
        .diary-card.card-end {
            background-color: #FFC48C; /* ç”œèœœæ©˜è‰² */
            color: var(--color-dark-green);
            text-align: center;
            padding-top: 150px;
            box-sizing: border-box;
            z-index: 0; 
        }
        
        /* å‘ä¸Šç¿»èµ°/æ­å¼€çš„æ•ˆæœ */
        .flipped {
            transform: translateY(-100%) rotateX(15deg) scale(1.05); 
            opacity: 0; 
            pointer-events: none; 
        }
        
        /* å¡ç‰‡å†…å®¹æ’ç‰ˆ */
        .card-content {
            padding: 20px;
            height: calc(100% - 40px);
            overflow-y: auto;
            /* å–æ¶ˆè™šçº¿è¾¹æ¡†ï¼Œä¿æŒç®€æ´ */
            border: none; 
            background-color: transparent; 
        }
        
        .diary-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 5px;
            /* åƒç´ åŒ–åˆ†éš”çº¿ */
            border-bottom: 3px dashed var(--color-light-green); 
        }
        
        .diary-body {
            min-height: 150px;
            line-height: 1.8;
            color: #333;
            white-space: pre-wrap;
        }
        
        .signature {
            text-align: right;
            margin-top: 20px;
            font-style: normal; /* å–æ¶ˆæ–œä½“ */
            color: var(--color-warm-orange); /* ç­¾åä½¿ç”¨æš–è‰² */
            text-shadow: 1px 1px 0 #fff;
        }
        
        
        /* --- ç´¢å¼•é¢æ¿æ ·å¼ --- */
        
        #summary-panel {
            width: 300px;
            min-height: 500px;
            background-color: #FFFFFF;
            padding: 20px;
            overflow-y: auto;
            display: none; 
            
            /* åƒç´ åŒ–è¾¹æ¡†å’Œé˜´å½± */
            border: 4px solid var(--color-medium-green); 
            box-shadow: 6px 6px 0 var(--color-pixel-shadow);
            border-radius: 0; 
        }
        
        #summary-panel h2 {
            color: var(--color-dark-green);
            border-bottom: 4px solid var(--color-light-green);
            padding-bottom: 10px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 0 var(--color-light-green);
        }
        
        .month-group {
            margin-bottom: 20px;
        }
        .month-group h3 {
            color: var(--color-medium-green); 
            font-size: 1.2em;
            margin-bottom: 10px;
            /* åƒç´ åŒ–æ ‡è®° */
            border-left: 5px solid var(--color-medium-green);
            padding-left: 10px;
        }
        .day-entry {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .day-label {
            font-weight: bold;
            width: 40px;
            color: var(--color-warm-orange);
            margin-right: 10px;
        }
        .diary-tag {
            padding: 4px 10px;
            border-radius: 0; /* åƒç´ åŒ–æ–¹è§’ */
            font-size: 0.9em;
            color: white;
            cursor: pointer;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px;
            border: 2px solid rgba(0,0,0,0.2); /* æ ‡ç­¾çš„åƒç´ è¾¹æ¡† */
            box-shadow: 1px 1px 0 rgba(0,0,0,0.2);
        }
        
        /* æ ‡ç­¾é¢œè‰² (ä¿æŒä¸è½æ¬¾ä¸€è‡´çš„é¢œè‰²åŒºåˆ†) */
        .tag-pink {
            background-color: #FF69B4; 
        }
        .tag-blue {
            background-color: #4169E1; 
        }
        
        
        /* --- æ¨¡æ€çª—å£æ ·å¼ --- */
        
        .modal {
            /* ä¿æŒå±…ä¸­è¦†ç›– */
            display: none; 
            position: fixed; 
            z-index: 2000; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(232, 247, 243, 0.8); /* ä½¿ç”¨æµ…èƒŒæ™¯è‰²è°ƒçš„åŠé€æ˜ */
            align-items: center; 
            justify-content: center; 
        }
        .modal-content {
            background-color: #FFFFFF; 
            padding: 30px;
            width: 80%;
            max-width: 500px; 
            position: relative;
            animation-name: animatetop;
            animation-duration: 0.4s;
            
            /* åƒç´ åŒ–æ¨¡æ€æ¡† */
            border: 4px solid var(--color-dark-green); 
            box-shadow: 8px 8px 0 var(--color-medium-green);
            border-radius: 0; 
        }
        .close-btn {
            color: var(--color-dark-green);
            float: right;
            font-size: 28px;
            font-weight: bold;
            transition: color 0.3s;
        }
        .close-btn:hover, .close-btn:focus {
            color: var(--color-warm-orange);
            text-decoration: none;
            cursor: pointer;
        }
        .modal-content h3 {
            color: var(--color-dark-green);
            margin-bottom: 20px;
            text-shadow: 1px 1px 0 var(--color-light-green);
        }
        /* è¾“å…¥æ¡†/æ–‡æœ¬åŸŸä½¿ç”¨åƒç´ è¾“å…¥æ¡†æ ·å¼ */
        .modal-content input[type="date"],
        .modal-content input[type="text"] {
            flex-grow: 1;
            padding: 8px;
            border: 3px solid var(--color-medium-green);
            border-radius: 0;
            box-shadow: 2px 2px 0 var(--color-light-green);
            font-family: 'DotGothic16', monospace;
        }
        .modal-content #diary-content {
            height: 150px;
            width: 100%;
            padding: 10px;
            box-sizing: border-box; 
            border: 3px solid var(--color-medium-green);
            border-radius: 0;
            resize: none;
            margin-top: 15px; 
            margin-bottom: 15px;
            font-family: 'DotGothic16', monospace;
        }
        
        /* è½æ¬¾æŒ‰é’®ç»„æ ·å¼ - åƒç´ åŒ–æ ‡ç­¾ */
        .signature-group {
            margin-top: 15px;
            justify-content: flex-start; 
            font-weight: bold;
        }
        .signature-group label {
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 0; 
            transition: background-color 0.2s;
            border: 2px solid var(--color-dark-green);
            box-shadow: 1px 1px 0 var(--color-medium-green);
            background-color: #fff;
        }
        .signature-group .pink-label:hover {
            background-color: #ffe4e8;
        }
        .signature-group .blue-label:hover {
            background-color: #e0e9ff;
        }
        .signature-group input[type="radio"] {
            margin-right: 5px;
        }
        
        
        /* --- æ§åˆ¶æŒ‰é’®æ ·å¼ --- */
        
        .controls {
            margin-top: 20px;
        }
        /* ä½¿ç”¨ä¸»é¡µçš„åƒç´ æŒ‰é’®æ ·å¼ */
        .controls button {
            display: inline-block;
            padding: 8px 15px;
            margin: 0 10px;
            cursor: pointer;
            background-color: #92C9B4; /* æ²»æ„ˆç»¿æŒ‰é’® */
            color: var(--color-dark-green);
            border: 3px solid var(--color-dark-green);
            box-shadow: 2px 2px 0 var(--color-medium-green);
            text-transform: uppercase;
            transition: all 0.1s;
            border-radius: 0;
        }
        .controls button:hover:not(:disabled) {
            background-color: #6AA58C;
        }
        .controls button:active:not(:disabled) {
            transform: translate(2px, 2px);
            box-shadow: none;
        }
        .controls button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            color: #666;
            box-shadow: none;
        }
        
        
        /* æµ®åŠ¨çš„â€œå†™æ—¥è®°â€æŒ‰é’®æ ·å¼ */
        #new-diary-btn {
            position: fixed; 
            bottom: 30px;
            right: 30px;
            background-color: var(--color-warm-orange); 
            color: white;
            border: 4px solid var(--color-dark-green); 
            border-radius: 0; 
            width: 60px;
            height: 60px;
            font-size: 30px;
            line-height: 60px;
            text-align: center;
            cursor: pointer;
            box-shadow: 4px 4px 0 var(--color-medium-green);
            z-index: 1000; 
            transition: all 0.2s;
        }
        
        #new-diary-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 6px 6px 0 var(--color-medium-green);
        }
        #new-diary-btn:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }
        
        /* åˆ‡æ¢è§†å›¾æŒ‰é’® */
        #toggle-view-btn {
            position: fixed;
            bottom: 100px;
            right: 30px;
            background-color: var(--color-medium-green);
            color: white;
            border: 3px solid var(--color-dark-green);
            border-radius: 0;
            padding: 10px 15px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 2px 2px 0 var(--color-dark-green);
            z-index: 1000;
            transition: all 0.2s;
        }
        #toggle-view-btn:hover {
            background-color: #5f9ea0;
        }
        #toggle-view-btn:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }
        /* æ¨¡æ€çª—å£å†…çš„è®¾ç½®ç»„ */
.settings-group {
    display: flex;
    justify-content: space-between;
    margin: 15px 0;
    border-top: 2px dashed #eee;
    padding-top: 10px;
}

.setting-item {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.setting-item .label {
    font-size: 0.8rem;
    color: #666;
    font-weight: bold;
}

/* æŒ‰é’®æ ·å¼ */
.card-actions {
    margin-top: 10px;
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

.edit-btn, .delete-btn {
    border: none;
    background: none;
    cursor: pointer;
    font-size: 0.8rem;
    text-decoration: underline;
    font-family: 'DotGothic16', monospace;
}

.edit-btn { color: #5EAFB0; }
.delete-btn { color: #ff6b6b; }

/* éšç§æ ‡ç­¾ */
.privacy-tag {
    display: inline-block;
    background: #f0f0f0;
    color: #888;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.7rem;
    margin-bottom: 5px;
}

.diary-footer {
    border-top: 1px dashed #ccc;
    padding-top: 10px;
    margin-top: 10px;
}
/* --- æ—¥è®°å¡ç‰‡å†…çš„å›¾ç‰‡æ˜¾ç¤ºä¼˜åŒ– --- */

.diary-img-wrapper {
    width: 100%;           /* å®½åº¦é“ºæ»¡å¡ç‰‡å†…å®¹åŒº */
    max-width: 280px;      /* é™åˆ¶æœ€å¤§å®½åº¦ï¼Œé˜²æ­¢æ¨ªå‘è¿‡å¤§ */
    aspect-ratio: 4 / 3;   /* ğŸ“¸ å¼ºåˆ¶ç»´æŒ 4:3 çš„é»„é‡‘æ¯”ä¾‹ (ä¹Ÿå¯ä»¥æ”¹æˆ 1/1 å˜æˆæ­£æ–¹å½¢) */
    margin: 10px auto;     /* å±…ä¸­æ˜¾ç¤ºï¼Œä¸æ–‡å­—ç•™å‡ºé—´è· */
    
    border: 3px solid var(--color-dark-green); /* åƒç´ è¾¹æ¡† */
    box-shadow: 3px 3px 0 var(--color-light-green);
    background-color: #eee; /* å›¾ç‰‡æœªåŠ è½½æ—¶çš„å ä½è‰² */
    overflow: hidden;      /* å…³é”®ï¼šéšè—è¶…å‡ºæ¯”ä¾‹çš„éƒ¨åˆ† */
    display: flex;
    align-items: center;
    justify-content: center;
}

.diary-photo {
    width: 100%;
    height: 100%;
    /* æ ¸å¿ƒå±æ€§ï¼šç­‰æ¯”ä¾‹ç¼©æ”¾å¹¶å¡«æ»¡å®¹å™¨ï¼Œå¤šä½™éƒ¨åˆ†è‡ªåŠ¨è£å‰ª */
    object-fit: cover; 
    
    /* å¦‚æœä½ å¸Œæœ›çœ‹åˆ°å®Œæ•´å›¾ç‰‡ï¼ˆä¸è£å‰ªï¼‰ä½†ç•™ç™½ï¼Œå¯ä»¥æ”¹æˆï¼š
       object-fit: contain; 
       background-color: #000; 
    */
    
    image-rendering: pixelated; /* ä¿æŒåƒç´ é£ï¼ˆå¯é€‰ï¼‰ */
    transition: transform 0.3s ease;
}

/* é¼ æ ‡æ‚¬åœåœ¨å›¾ç‰‡ä¸Šæ—¶è½»å¾®æ”¾å¤§ï¼Œå¢åŠ äº’åŠ¨æ„Ÿ */
.diary-img-wrapper:hover .diary-photo {
    transform: scale(1.05);
}
/* å†™æ—¥è®°å¼¹çª—é‡Œçš„é¢„è§ˆå›¾é™åˆ¶ */
#image-preview {
    max-width: 100px !important; /* é™åˆ¶é¢„è§ˆå›¾éå¸¸å°ï¼Œä¸å½±å“å†™å­— */
    max-height: 100px !important;
    object-fit: cover;
    border: 2px solid var(--color-medium-green);
}

/* é€‚é…ç§»åŠ¨ç«¯ */
@media screen and (max-width: 768px) {
    .diary-img-wrapper {
        max-width: 100%;    /* æ‰‹æœºç«¯å®½åº¦å æ»¡ */
        aspect-ratio: 16 / 9; /* æ‰‹æœºç«¯å¯ä»¥ç¨å¾®æ‰ä¸€ç‚¹ï¼Œç»™æ–‡å­—ç•™ç©ºé—´ */
    }
}


/* --- ç§»åŠ¨ç«¯é€‚é… (å“åº”å¼) --- */
@media screen and (max-width: 768px) {
    .diary-main {
        padding: 10px; /* å‡å°å†…è¾¹è· */
    }

    #card-stack-container {
        width: 100%; /* å®½åº¦å æ»¡å±å¹• */
        max-width: 350px; /* ä½†æœ€å¤§ä¸è¶…è¿‡ 350px */
        height: 500px; /* é«˜åº¦é€‚å½“æ‹‰é•¿ä»¥å®¹çº³å†…å®¹ */
        margin: 20px auto; /* å±…ä¸­ */
    }

    .diary-card.card-cover h2 {
        font-size: 1.8em; /* ç¼©å°æ ‡é¢˜å­—ä½“ */
    }
    
    /* è°ƒæ•´æŒ‰é’®ä½ç½®ï¼Œé˜²æ­¢é®æŒ¡å†…å®¹ */
    #new-diary-btn {
        bottom: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        line-height: 50px;
        font-size: 24px;
    }
    
    #toggle-view-btn {
        bottom: 80px;
        right: 20px;
        padding: 8px 10px;
    }
}

/* ç§»åŠ¨ç«¯é€‚é…ï¼šæ‰‹æœºä¸Šå›¾ç‰‡å¯ä»¥ç¨å¾®é«˜ä¸€ç‚¹ */
@media screen and (max-width: 768px) {
    .diary-photo {
        max-height: 150px;
    }
}